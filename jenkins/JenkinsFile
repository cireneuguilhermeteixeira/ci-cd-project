pipeline {
    agent any
    tools {
        nodejs "NodeJs"
    }
    stages {
        stage ('Deliver for development') {

            when {
                branch "*/develop"
            }
            steps {
                bat 'bash ./jenkins/scripts/deliver-for-development.sh'
                build job: 'ci-cd-prod/main', parameters: [string(name: 'param1', value:'val1')], wait: false

            }
        }

        stage ('Deployment Production') {

            when {
                branch "*/main"
            }
           steps {
                input message: 'Want to start deploy to production? (Click "Proceed" to continue)'
                bat 'bash ./jenkins/scripts/deliver-for-production.sh'
            }
        }
    }
}